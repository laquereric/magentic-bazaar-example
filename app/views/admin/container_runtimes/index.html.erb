<% content_for(:title, "Container Runtimes - Admin") %>

<div class="mb-8 flex items-center justify-between">
  <div>
    <h1 class="text-2xl font-bold text-gray-900">Container Runtimes</h1>
    <p class="mt-1 text-sm text-gray-500">Configured container runtime instances</p>
  </div>
  <%= link_to "New Container Runtime", new_admin_container_runtime_path, class: "inline-flex items-center px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-indigo-600 hover:bg-indigo-700" %>
</div>

<div class="bg-white shadow rounded-lg overflow-hidden">
  <table class="min-w-full divide-y divide-gray-200">
    <thead class="bg-gray-50">
      <tr>
        <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase">Name</th>
        <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase">Driver</th>
        <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase">Status</th>
        <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase">Active</th>
        <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase">Last Tested</th>
        <th class="px-6 py-3"></th>
      </tr>
    </thead>
    <tbody class="divide-y divide-gray-200">
      <% @container_runtimes.each do |runtime| %>
        <tr>
          <td class="px-6 py-4 text-sm font-medium text-gray-900"><%= runtime.name %></td>
          <td class="px-6 py-4 text-sm font-mono text-gray-500"><%= runtime.driver %></td>
          <td class="px-6 py-4">
            <% case runtime.status %>
            <% when "active" %>
              <span class="inline-flex items-center rounded-full bg-green-100 text-green-800 px-2.5 py-0.5 text-xs font-medium">Active</span>
            <% when "error" %>
              <span class="inline-flex items-center rounded-full bg-red-100 text-red-800 px-2.5 py-0.5 text-xs font-medium">Error</span>
            <% else %>
              <span class="inline-flex items-center rounded-full bg-gray-100 text-gray-600 px-2.5 py-0.5 text-xs font-medium">Inactive</span>
            <% end %>
          </td>
          <td class="px-6 py-4">
            <% if runtime.active? %>
              <span class="inline-flex items-center rounded-full bg-green-100 text-green-800 px-2.5 py-0.5 text-xs font-medium">Yes</span>
            <% else %>
              <span class="inline-flex items-center rounded-full bg-gray-100 text-gray-600 px-2.5 py-0.5 text-xs font-medium">No</span>
            <% end %>
          </td>
          <td class="px-6 py-4 text-sm text-gray-500">
            <%= runtime.last_tested_at ? "#{time_ago_in_words(runtime.last_tested_at)} ago" : "Never" %>
          </td>
          <td class="px-6 py-4 text-right text-sm">
            <%= link_to "View", admin_container_runtime_path(runtime), class: "text-indigo-600 hover:text-indigo-900" %>
          </td>
        </tr>
      <% end %>
      <% if @container_runtimes.empty? %>
        <tr>
          <td colspan="6" class="px-6 py-8 text-center text-sm text-gray-500">
            No container runtimes configured yet.
            <%= link_to "Create one", new_admin_container_runtime_path, class: "text-indigo-600 hover:text-indigo-900" %>.
          </td>
        </tr>
      <% end %>
    </tbody>
  </table>
</div>
